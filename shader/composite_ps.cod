//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Buffer Definitions: 
//
// cbuffer CAMERA_CONSTANT_BUFFER
// {
//
//   struct CAMERA_CONSTANTS
//   {
//       
//       float4 position;               // Offset:    0
//       float4 direction;              // Offset:   16
//       row_major float4x4 view;       // Offset:   32
//       row_major float4x4 projection; // Offset:   96
//       row_major float4x4 view_projection;// Offset:  160
//       row_major float4x4 inverse_view;// Offset:  224
//       row_major float4x4 inverse_view_projection;// Offset:  288
//
//   } camera_constants;                // Offset:    0 Size:   352
//
// }
//
// cbuffer LIGHT_CONSTANT_BUFFER
// {
//
//   struct LIGHT_CONSTANTS
//   {
//       
//       float4 direction;              // Offset:    0
//       float4 color;                  // Offset:   16
//
//   } light_direction;                 // Offset:    0 Size:    32
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// sampler_states[1]                 sampler      NA          NA             s1      1 
// sampler_states[2]                 sampler      NA          NA             s2      1 
// albedo_map                        texture  float4          2d             t0      1 
// normal_map                        texture  float4          2d             t1      1 
// position_map                      texture  float4          2d             t2      1 
// RM_map                            texture  float4          2d             t3      1 
// light_map                         texture  float4          2d             t5      1 
// diffuse_iem                       texture  float4        cube            t33      1 
// lut_ggx                           texture  float4          2d            t35      1 
// CAMERA_CONSTANT_BUFFER            cbuffer      NA          NA            cb1      1 
// LIGHT_CONSTANT_BUFFER             cbuffer      NA          NA            cb2      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// TEXCOORD                 0   xy          1     NONE   float   xy  
// NORMAL                   0   xyz         2     NONE   float       
// TEXCOORD                 2   xyz         3     NONE   float       
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | skipOptimization
dcl_constantbuffer CB1[1], immediateIndexed
dcl_constantbuffer CB2[1], immediateIndexed
dcl_sampler s1, mode_default
dcl_sampler s2, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t1
dcl_resource_texture2d (float,float,float,float) t2
dcl_resource_texture2d (float,float,float,float) t3
dcl_resource_texture2d (float,float,float,float) t5
dcl_resource_texturecube (float,float,float,float) t33
dcl_resource_texture2d (float,float,float,float) t35
dcl_input_ps linear v1.xy
dcl_output o0.xyzw
dcl_temps 19
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.texcoord.x; v1.y <- pin.texcoord.y; 
//   v2.x <- pin.normal.x; v2.y <- pin.normal.y; v2.z <- pin.normal.z; 
//   v3.x <- pin.worldpos.x; v3.y <- pin.worldpos.y; v3.z <- pin.worldpos.z; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w
//
#line 16 "C:\Users\2200167\Desktop\個人製作\myme03\myme\HLSL\pbr_ibl_functions.hlsli"
mov r0.x, l(2.200000)  // r0.x <- gamma

#line 17
mov r0.y, l(3.141593)  // r0.y <- PI

#line 171 "C:\Users\2200167\Desktop\個人製作\myme03\myme\HLSL\composite_ps.hlsl"
nop 

#line 88
mov r1.xyz, l(0.040000,0.040000,0.040000,0)  // r1.x <- material_info.f0.x; r1.y <- material_info.f0.y; r1.z <- material_info.f0.z

#line 100
mov r2.x, l(1.000000)  // r2.x <- material_info.specular_weight

#line 105
mov r3.y, l(1.000000)  // r3.y <- material_info.occlusion_factor

#line 106
mov r3.z, l(1.000000)  // r3.z <- material_info.occlusion_strength

#line 111
sample_indexable(texture2d)(float,float,float,float) r4.xyz, v1.xyxx, t0.xyzw, s2
mov r4.xyz, r4.xyzx  // r4.x <- sampled.x; r4.y <- sampled.y; r4.z <- sampled.z

#line 113
log r4.xyz, r4.xyzx
mul r0.xzw, r0.xxxx, r4.xxyz
exp r0.xzw, r0.xxzw  // r0.x <- sampled.x; r0.z <- sampled.y; r0.w <- sampled.z

#line 115
mov r0.xzw, r0.xxzw  // r0.x <- material_info.basecolor.x; r0.z <- material_info.basecolor.y; r0.w <- material_info.basecolor.z

#line 121
sample_indexable(texture2d)(float,float,float,float) r4.xyz, v1.xyxx, t3.xyzw, s1
mov r4.xyz, r4.xyzx  // r4.x <- sampled.x; r4.y <- sampled.y; r4.z <- sampled.z

#line 123
mov r2.y, r4.z  // r2.y <- r_factor

#line 124
mov r4.x, r4.x  // r4.x <- m_factor

#line 125
mov r3.x, r4.y  // r3.x <- pure_white

#line 128
mov r4.x, r4.x  // r4.x <- material_info.metallic

#line 129
mov r2.y, r2.y  // r2.y <- material_info.perceptual_roughness

#line 130
mov r3.x, r3.x  // r3.x <- material_info.pure_white

#line 133
mov r4.yzw, -r0.xxzw
add r4.yzw, r4.yyzw, l(0.000000, 0.000000, 0.000000, 0.000000)
mul r4.yzw, r4.yyzw, r4.xxxx
add r4.yzw, r0.xxzw, r4.yyzw  // r4.y <- material_info.c_diff.x; r4.z <- material_info.c_diff.y; r4.w <- material_info.c_diff.z

#line 136
mov r5.xyz, -r1.xyzx
add r0.xzw, r0.xxzw, r5.xxyz
mul r0.xzw, r0.xxzw, r4.xxxx
add r0.xzw, r0.xxzw, r1.xxyz  // r0.x <- material_info.f0.x; r0.z <- material_info.f0.y; r0.w <- material_info.f0.z

#line 151
itof r1.xyz, l(0, 0, 0, 0)  // r1.z <- e_factor

#line 156
mov r1.xyz, r1.xyzx  // r1.x <- material_info.emissive_factor.x; r1.y <- material_info.emissive_factor.y; r1.z <- material_info.emissive_factor.z

#line 161
mul r2.z, r2.y, r2.y  // r2.z <- material_info.alpha_roughness

#line 164
mov r5.xyz, l(1.000000,1.000000,1.000000,0)  // r5.x <- material_info.f90.x; r5.y <- material_info.f90.y; r5.z <- material_info.f90.z

#line 167
mov r2.y, r2.y  // r2.y <- <fetch_material_info return value>.perceptual_roughness
mov r2.z, r2.z  // r2.z <- <fetch_material_info return value>.alpha_roughness
mov r2.x, r2.x  // r2.x <- <fetch_material_info return value>.specular_weight
mov r0.xzw, r0.xxzw  // r0.x <- <fetch_material_info return value>.f0.x; r0.z <- <fetch_material_info return value>.f0.y; r0.w <- <fetch_material_info return value>.f0.z
mov r4.yzw, r4.yyzw  // r4.y <- <fetch_material_info return value>.c_diff.x; r4.z <- <fetch_material_info return value>.c_diff.y; r4.w <- <fetch_material_info return value>.c_diff.z
mov r5.xyz, r5.xyzx  // r5.x <- <fetch_material_info return value>.f90.x; r5.y <- <fetch_material_info return value>.f90.y; r5.z <- <fetch_material_info return value>.f90.z
mov r3.x, r3.x  // r3.x <- <fetch_material_info return value>.pure_white
mov r3.y, r3.y  // r3.y <- <fetch_material_info return value>.occlusion_factor
mov r3.z, r3.z  // r3.z <- <fetch_material_info return value>.occlusion_strength
mov r1.xyz, r1.xyzx  // r1.x <- <fetch_material_info return value>.emissive_factor.x; r1.y <- <fetch_material_info return value>.emissive_factor.y; r1.z <- <fetch_material_info return value>.emissive_factor.z

#line 171
mov r2.xyz, r2.xyzx  // r2.x <- material_info.specular_weight; r2.y <- material_info.perceptual_roughness; r2.z <- material_info.alpha_roughness
mov r0.xzw, r0.xxzw  // r0.x <- material_info.f0.x; r0.z <- material_info.f0.y; r0.w <- material_info.f0.z
mov r4.yzw, r4.yyzw  // r4.y <- material_info.c_diff.x; r4.z <- material_info.c_diff.y; r4.w <- material_info.c_diff.z
mov r5.xyz, r5.xyzx  // r5.x <- material_info.f90.x; r5.y <- material_info.f90.y; r5.z <- material_info.f90.z
mov r3.xyz, r3.xyzx  // r3.x <- material_info.pure_white; r3.y <- material_info.occlusion_factor; r3.z <- material_info.occlusion_strength
mov r1.xyz, r1.xyzx  // r1.x <- material_info.emissive_factor.x; r1.y <- material_info.emissive_factor.y; r1.z <- material_info.emissive_factor.z

#line 173
sample_indexable(texture2d)(float,float,float,float) r6.xyz, v1.xyxx, t2.xyzw, s2
mov r6.xyz, r6.xyzx  // r6.x <- P.x; r6.y <- P.y; r6.z <- P.z

#line 175
mov r7.w, l(1.000000)  // r7.w <- material_info.basecolor.w

#line 177
mov r6.xyz, -r6.xyzx
add r6.xyz, r6.xyzx, cb1[0].xyzx
dp3 r1.w, r6.xyzx, r6.xyzx
rsq r1.w, r1.w
mul r6.xyz, r1.wwww, r6.xyzx  // r6.x <- V.x; r6.y <- V.y; r6.z <- V.z

#line 179
sample_indexable(texture2d)(float,float,float,float) r8.xyz, v1.xyxx, t5.xyzw, s2
mov r8.xyz, r8.xyzx  // r8.x <- light.x; r8.y <- light.y; r8.z <- light.z

#line 181
mov r9.xyz, -cb2[0].xyzx
dp3 r1.w, r9.xyzx, r9.xyzx
rsq r1.w, r1.w
mul r9.xyz, r1.wwww, r9.xyzx  // r9.x <- L.x; r9.y <- L.y; r9.z <- L.z

#line 183
sample_indexable(texture2d)(float,float,float,float) r10.xyz, v1.xyxx, t1.xyzw, s2  // r10.x <- N.x; r10.y <- N.y; r10.z <- N.z

#line 185
nop 
mov r0.xzw, r0.xxzw
mov r4.yzw, r4.yyzw
mov r5.xyz, r5.xyzx
mov r1.xyz, r1.xyzx
mov r2.xyz, r2.xyzx
mov r7.w, r7.w
mov r3.xyz, r3.xyzx
mov r9.xyz, r9.xyzx
mov r6.xyz, r6.xyzx
mov r10.xyz, r10.xyzx
mov r8.xyz, r8.xyzx

#line 155 "C:\Users\2200167\Desktop\個人製作\myme03\myme\HLSL\pbr_ibl_functions.hlsli"
mov r11.xyz, l(0,0,0,0)  // r11.x <- f_specular.x; r11.y <- f_specular.y; r11.z <- f_specular.z

#line 156
mov r12.xyz, l(0,0,0,0)  // r12.x <- f_diffuse.x; r12.y <- f_diffuse.y; r12.z <- f_diffuse.z

#line 158
mov r13.xyz, l(0,0,0,0)  // r13.x <- f_clearcoat.x; r13.y <- f_clearcoat.y; r13.z <- f_clearcoat.z

#line 159
mov r14.xyz, l(0,0,0,0)  // r14.x <- f_sheen.x; r14.y <- f_sheen.y; r14.z <- f_sheen.z

#line 162
mov r1.w, l(1.000000)  // r1.w <- albedo_sheen_scaling

#line 167
nop 
mov r10.xyz, r10.xyzx
mov r6.xyz, r6.xyzx
mov r15.y, r2.y
mov r4.yzw, r4.yyzw
mov r0.xzw, r0.xxzw
mov r2.x, r2.x

#line 34
dp3 r2.w, r10.xyzx, r6.xyzx
max r2.w, r2.w, l(0.000000)
min r15.x, r2.w, l(1.000000)  // r15.x <- NoV

#line 36
max r15.zw, r15.xxxy, l(0.000000, 0.000000, 0.000000, 0.000000)
min r15.zw, r15.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)  // r15.z <- brdf_sample_point.x; r15.w <- brdf_sample_point.y

#line 41
sample_indexable(texture2d)(float,float,float,float) r15.zw, r15.zwzz, t35.zwxy, s2
mov r15.zw, r15.zzzw  // r15.z <- f_ab.x; r15.w <- f_ab.y

#line 44
sample_indexable(texturecube)(float,float,float,float) r16.xyz, r10.xyzx, t33.xyzw, s2
mov r16.xyz, r16.xyzx  // r16.x <- irradiance.x; r16.y <- irradiance.y; r16.z <- irradiance.z

#line 49
mov r2.w, -r15.y
add r2.w, r2.w, l(1.000000)
max r17.xyz, r0.xzwx, r2.wwww
mov r18.xyz, -r0.xzwx
add r17.xyz, r17.xyzx, r18.xyzx  // r17.x <- fr.x; r17.y <- fr.y; r17.z <- fr.z

#line 50
mov r2.w, -r15.x
add r2.w, r2.w, l(1.000000)
mov r3.w, l(1.000000)
mul r3.w, r2.w, r3.w
mul r2.w, r2.w, r2.w
mul r2.w, r2.w, r2.w
mul r2.w, r2.w, r3.w
mul r17.xyz, r2.wwww, r17.xyzx
add r17.xyz, r0.xzwx, r17.xyzx  // r17.x <- k_s.x; r17.y <- k_s.y; r17.z <- k_s.z

#line 51
mul r17.xyz, r2.xxxx, r17.xyzx
mul r17.xyz, r15.zzzz, r17.xyzx
add r17.xyz, r15.wwww, r17.xyzx  // r17.x <- fss_ess.x; r17.y <- fss_ess.y; r17.z <- fss_ess.z

#line 54
add r2.w, r15.w, r15.z
mov r2.w, -r2.w
add r2.w, r2.w, l(1.000000)  // r2.w <- ems

#line 55
mov r15.xyz, -r0.xzwx
add r15.xyz, r15.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
div r15.xyz, r15.xyzx, l(21.000000, 21.000000, 21.000000, 0.000000)
add r15.xyz, r0.xzwx, r15.xyzx
mul r15.xyz, r2.xxxx, r15.xyzx  // r15.x <- f_avg.x; r15.y <- f_avg.y; r15.z <- f_avg.z

#line 56
mul r18.xyz, r17.xyzx, r2.wwww
mul r18.xyz, r15.xyzx, r18.xyzx
mul r15.xyz, r2.wwww, r15.xyzx
mov r15.xyz, -r15.xyzx
add r15.xyz, r15.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
div r15.xyz, r18.xyzx, r15.xyzx  // r15.x <- fms_ems.x; r15.y <- fms_ems.y; r15.z <- fms_ems.z

#line 57
mov r17.xyz, -r17.xyzx
add r17.xyz, r17.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
add r17.xyz, r15.xyzx, r17.xyzx
mul r17.xyz, r4.yzwy, r17.xyzx  // r17.x <- k_d.x; r17.y <- k_d.y; r17.z <- k_d.z

#line 59
add r15.xyz, r15.xyzx, r17.xyzx
mul r15.xyz, r16.xyzx, r15.xyzx  // r15.x <- <ibl_radiance_lambertian return value>.x; r15.y <- <ibl_radiance_lambertian return value>.y; r15.z <- <ibl_radiance_lambertian return value>.z

#line 167
add r12.xyz, r12.xyzx, r15.xyzx

#line 169
nop 
mov r10.xyz, r10.xyzx
mov r6.xyz, r6.xyzx
mov r15.y, r2.y
mov r0.xzw, r0.xxzw
mov r2.x, r2.x
mov r8.xyz, r8.xyzx

#line 65
dp3 r2.y, r10.xyzx, r6.xyzx
max r2.y, r2.y, l(0.000000)
min r15.x, r2.y, l(1.000000)  // r15.x <- NoV

#line 67
max r2.yw, r15.xxxy, l(0.000000, 0.000000, 0.000000, 0.000000)
min r2.yw, r2.yyyw, l(0.000000, 1.000000, 0.000000, 1.000000)  // r2.y <- brdf_sample_point.x; r2.w <- brdf_sample_point.y

#line 68
sample_indexable(texture2d)(float,float,float,float) r2.yw, r2.ywyy, t35.zxwy, s2
mov r2.yw, r2.yyyw  // r2.y <- f_ab.x; r2.w <- f_ab.y

#line 71
mov r8.xyz, r8.xyzx  // r8.x <- specular_light.x; r8.y <- specular_light.y; r8.z <- specular_light.z

#line 75
mov r3.w, -r15.y
add r3.w, r3.w, l(1.000000)
max r15.yzw, r0.xxzw, r3.wwww
mov r16.xyz, -r0.xzwx
add r15.yzw, r15.yyzw, r16.xxyz  // r15.y <- fr.x; r15.z <- fr.y; r15.w <- fr.z

#line 76
mov r3.w, -r15.x
add r3.w, r3.w, l(1.000000)
mov r4.x, l(1.000000)
mul r4.x, r3.w, r4.x
mul r3.w, r3.w, r3.w
mul r3.w, r3.w, r3.w
mul r3.w, r3.w, r4.x
mul r15.xyz, r3.wwww, r15.yzwy
add r15.xyz, r0.xzwx, r15.xyzx  // r15.x <- k_s.x; r15.y <- k_s.y; r15.z <- k_s.z

#line 77
mul r15.xyz, r2.yyyy, r15.xyzx
add r15.xyz, r2.wwww, r15.xyzx  // r15.x <- fss_ess.x; r15.y <- fss_ess.y; r15.z <- fss_ess.z

#line 79
mul r8.xyz, r2.xxxx, r8.xyzx
mul r8.xyz, r15.xyzx, r8.xyzx  // r8.x <- <ibl_radiance_ggx return value>.x; r8.y <- <ibl_radiance_ggx return value>.y; r8.z <- <ibl_radiance_ggx return value>.z

#line 169
add r8.xyz, r8.xyzx, r11.xyzx  // r8.x <- f_specular.x; r8.y <- f_specular.y; r8.z <- f_specular.z

#line 174
add r11.xyz, r9.xyzx, r6.xyzx
dp3 r2.y, r11.xyzx, r11.xyzx
rsq r2.y, r2.y
mul r11.xyz, r2.yyyy, r11.xyzx  // r11.x <- H.x; r11.y <- H.y; r11.z <- H.z

#line 176
dp3 r2.y, r10.xyzx, r9.xyzx
max r2.y, r2.y, l(0.000000)  // r2.y <- NoL

#line 177
dp3 r2.w, r10.xyzx, r11.xyzx
max r2.w, r2.w, l(0.000000)  // r2.w <- NoH

#line 178
dp3 r3.w, r11.xyzx, r6.xyzx
max r3.w, r3.w, l(0.000000)  // r3.w <- HoV

#line 179
dp3 r4.x, r10.xyzx, r6.xyzx
max r4.x, r4.x, l(0.000000)  // r4.x <- NoV

#line 181
mov r6.xyz, r3.xxxx  // r6.x <- Li.x; r6.y <- Li.y; r6.z <- Li.z

#line 182
lt r3.x, l(0.000000), r2.y
lt r5.w, l(0.000000), r4.x
or r3.x, r3.x, r5.w
if_nz r3.x

#line 187
  mul r9.xyz, r2.yyyy, r6.xyzx
  nop 
  mov r10.xyz, r0.xzwx
  mov r11.xyz, r5.xyzx
  mov r4.yzw, r4.yyzw
  mov r2.x, r2.x
  mov r3.x, r3.w

#line 131
  nop 
  mov r10.xyz, r10.xyzx
  mov r11.xyz, r11.xyzx
  mov r3.x, r3.x

#line 92
  mov r15.xyz, -r10.xyzx
  add r11.xyz, r11.xyzx, r15.xyzx
  mov r3.x, -r3.x
  add r3.x, r3.x, l(1.000000)
  max r3.x, r3.x, l(0.000000)
  min r3.x, r3.x, l(1.000000)
  mov r5.w, l(1.000000)
  mul r5.w, r3.x, r5.w
  mul r3.x, r3.x, r3.x
  mul r3.x, r3.x, r3.x
  mul r3.x, r3.x, r5.w
  mul r11.xyz, r3.xxxx, r11.xyzx
  add r10.xyz, r10.xyzx, r11.xyzx  // r10.x <- <f_schlick return value>.x; r10.y <- <f_schlick return value>.y; r10.z <- <f_schlick return value>.z

#line 131
  mul r10.xyz, r2.xxxx, r10.xyzx
  mov r10.xyz, -r10.xyzx
  add r10.xyz, r10.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
  div r4.yzw, r4.yyzw, r0.yyyy
  mul r4.yzw, r4.yyzw, r10.xxyz  // r4.y <- <brdf_lambertian return value>.x; r4.z <- <brdf_lambertian return value>.y; r4.w <- <brdf_lambertian return value>.z

#line 187
  mul r4.yzw, r4.yyzw, r9.xxyz
  add r12.xyz, r4.yzwy, r12.xyzx

#line 190
  mul r4.yzw, r2.yyyy, r6.xxyz
  nop 
  mov r6.xyz, r0.xzwx
  mov r9.xyz, r5.xyzx
  mov r2.z, r2.z
  mov r2.x, r2.x
  mov r3.x, r3.w
  mov r2.y, r2.y
  mov r4.x, r4.x
  mov r2.w, r2.w

#line 141
  nop 
  mov r6.xyz, r6.xyzx
  mov r9.xyz, r9.xyzx
  mov r3.x, r3.x

#line 92
  mov r10.xyz, -r6.xyzx
  add r9.xyz, r9.xyzx, r10.xyzx
  mov r3.x, -r3.x
  add r3.x, r3.x, l(1.000000)
  max r3.x, r3.x, l(0.000000)
  min r3.x, r3.x, l(1.000000)
  mov r5.w, l(1.000000)
  mul r5.w, r3.x, r5.w
  mul r3.x, r3.x, r3.x
  mul r3.x, r3.x, r3.x
  mul r3.x, r3.x, r5.w
  mul r9.xyz, r3.xxxx, r9.xyzx
  add r6.xyz, r6.xyzx, r9.xyzx  // r6.x <- <f_schlick return value>.x; r6.y <- <f_schlick return value>.y; r6.z <- <f_schlick return value>.z

#line 141
  mov r6.xyz, r6.xyzx  // r6.x <- F.x; r6.y <- F.y; r6.z <- F.z

#line 142
  nop 
  mov r2.y, r2.y
  mov r4.x, r4.x
  mov r2.z, r2.z

#line 107
  mul r3.x, r2.z, r2.z  // r3.x <- alpha_roughness_sq

#line 109
  mul r5.w, r4.x, r4.x
  mov r6.w, -r3.x
  add r6.w, r6.w, l(1.000000)
  mul r5.w, r5.w, r6.w
  add r5.w, r3.x, r5.w
  sqrt r5.w, r5.w
  mul r5.w, r2.y, r5.w  // r5.w <- ggxv

#line 110
  mul r2.y, r2.y, r2.y
  mov r6.w, -r3.x
  add r6.w, r6.w, l(1.000000)
  mul r2.y, r2.y, r6.w
  add r2.y, r3.x, r2.y
  sqrt r2.y, r2.y
  mul r2.y, r2.y, r4.x  // r2.y <- ggxl

#line 112
  add r2.y, r2.y, r5.w  // r2.y <- ggx

#line 113
  lt r3.x, l(0.000000), r2.y
  div r2.y, l(0.500000), r2.y
  movc r2.y, r3.x, r2.y, l(0)  // r2.y <- <v_ggx return value>

#line 142
  mov r2.y, r2.y  // r2.y <- Vis

#line 143
  nop 
  mov r2.w, r2.w
  mov r2.z, r2.z

#line 122
  mul r2.z, r2.z, r2.z  // r2.z <- alpha_roughness_sq

#line 123
  mul r2.w, r2.w, r2.w
  mov r3.x, l(-1.000000)
  add r3.x, r2.z, r3.x
  mul r2.w, r2.w, r3.x
  add r2.w, r2.w, l(1.000000)  // r2.w <- f

#line 124
  mul r0.y, r0.y, r2.w
  mul r0.y, r2.w, r0.y
  div r0.y, r2.z, r0.y  // r0.y <- <d_ggx return value>

#line 143
  mov r0.y, r0.y  // r0.y <- D

#line 145
  mul r2.xzw, r2.xxxx, r6.xxyz
  mul r2.xyz, r2.yyyy, r2.xzwx
  mul r2.xyz, r0.yyyy, r2.xyzx  // r2.x <- <brdf_specular_ggx return value>.x; r2.y <- <brdf_specular_ggx return value>.y; r2.z <- <brdf_specular_ggx return value>.z

#line 190
  mul r2.xyz, r2.xyzx, r4.yzwy
  add r8.xyz, r2.xyzx, r8.xyzx

#line 192
endif 

#line 197
mul r2.xyz, r3.yyyy, r12.xyzx
mov r4.xyz, -r12.xyzx
add r2.xyz, r2.xyzx, r4.xyzx
mul r2.xyz, r2.xyzx, r3.zzzz
add r2.xyz, r2.xyzx, r12.xyzx  // r2.x <- f_diffuse.x; r2.y <- f_diffuse.y; r2.z <- f_diffuse.z

#line 198
mul r4.xyz, r3.yyyy, r8.xyzx
mov r6.xyz, -r8.xyzx
add r4.xyz, r4.xyzx, r6.xyzx
mul r4.xyz, r3.zzzz, r4.xyzx
add r4.xyz, r4.xyzx, r8.xyzx  // r4.x <- f_specular.x; r4.y <- f_specular.y; r4.z <- f_specular.z

#line 199
mul r6.xyz, r3.yyyy, r14.xyzx
mov r8.xyz, -r14.xyzx
add r6.xyz, r6.xyzx, r8.xyzx
mul r6.xyz, r3.zzzz, r6.xyzx
add r6.xyz, r6.xyzx, r14.xyzx  // r6.x <- f_sheen.x; r6.y <- f_sheen.y; r6.z <- f_sheen.z

#line 200
mul r8.xyz, r3.yyyy, r13.xyzx
mov r9.xyz, -r13.xyzx
add r8.xyz, r8.xyzx, r9.xyzx
mul r3.xyz, r3.zzzz, r8.xyzx
add r3.xyz, r3.xyzx, r13.xyzx  // r3.x <- f_clearcoat.x; r3.y <- f_clearcoat.y; r3.z <- f_clearcoat.z

#line 203
mov r1.xyz, r1.xyzx  // r1.x <- f_emissive.x; r1.y <- f_emissive.y; r1.z <- f_emissive.z

#line 211
mov r0.y, l(0)  // r0.y <- clearcoat_factor

#line 212
mov r8.xyz, l(0,0,0,0)  // r8.x <- clearcoat_fresnel.x; r8.y <- clearcoat_fresnel.y; r8.z <- clearcoat_fresnel.z

#line 214
nop 
mov r0.xzw, r0.xxzw
mov r5.xyz, r5.xyzx
mov r3.w, r3.w

#line 92
mov r9.xyz, -r0.xzwx
add r5.xyz, r5.xyzx, r9.xyzx
mov r2.w, -r3.w
add r2.w, r2.w, l(1.000000)
max r2.w, r2.w, l(0.000000)
min r2.w, r2.w, l(1.000000)
mov r3.w, l(1.000000)
mul r3.w, r2.w, r3.w
mul r2.w, r2.w, r2.w
mul r2.w, r2.w, r2.w
mul r2.w, r2.w, r3.w
mul r5.xyz, r2.wwww, r5.xyzx
add r0.xzw, r0.xxzw, r5.xxyz  // r0.x <- <f_schlick return value>.x; r0.z <- <f_schlick return value>.y; r0.w <- <f_schlick return value>.z

#line 214
mov r0.xzw, r0.xxzw  // r0.x <- F.x; r0.z <- F.y; r0.w <- F.z

#line 215
itof r5.xyz, l(1, 1, 1, 0)
mov r0.xzw, -r0.xxzw
add r0.xzw, r0.xxzw, r5.xxyz
mul r0.xzw, r0.xxzw, r2.xxyz
add r0.xzw, r0.xxzw, r1.xxyz
add r0.xzw, r4.xxyz, r0.xxzw  // r0.x <- color.x; r0.z <- color.y; r0.w <- color.z

#line 216
mul r0.xzw, r1.wwww, r0.xxzw
add r0.xzw, r0.xxzw, r6.xxyz  // r0.x <- color.x; r0.z <- color.y; r0.w <- color.z

#line 217
mul r1.xyz, r0.yyyy, r8.xyzx
mov r1.xyz, -r1.xyzx
add r1.xyz, r1.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
mul r0.xyz, r0.xzwx, r1.xyzx
add r0.xyz, r3.xyzx, r0.xyzx  // r0.x <- color.x; r0.y <- color.y; r0.z <- color.z

#line 218
itof r1.xyz, l(0, 0, 0, 0)
max r7.xyz, r0.xyzx, r1.xyzx  // r7.x <- <physically_based_rendering return value>.x; r7.y <- <physically_based_rendering return value>.y; r7.z <- <physically_based_rendering return value>.z
mov r7.w, r7.w  // r7.w <- <physically_based_rendering return value>.w

#line 185 "C:\Users\2200167\Desktop\個人製作\myme03\myme\HLSL\composite_ps.hlsl"
mov o0.xyzw, r7.xyzw
ret 
// Approximately 347 instruction slots used
